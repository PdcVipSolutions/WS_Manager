<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<title>WorkSpaceManager</title></head>
<body><span style="font-weight: bold; font-family: Arial;">Copyright (c) Prolog Developemnt Center SPb</span><br style="font-family: Arial;" /><h1 style="font-family: Arial;">Experimental project WorkSpace Manager </h1><h2 style="font-family: Arial;">Motivation</h2><span style="font-family: Arial;">The
idea of &#8203;&#8203;developing the WorkSpaceManager application appeared when
trying to use the SolutionManager application, which is part of PDC's
professional version of Visual Prolog.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">The need for its use
was due to the fact that there were simultaneously several
interdependent projects in the work that needed to be compiled
together, run for execution. In particular, the situation of using
Visual Prolog system directly "from the pen" of its developers, when it
was necessary to compile a whole lot of projects (there were about 50
of them, including various small examples and tests)</span><br style="font-family: Arial;" /><span style="font-family: Arial;">Did not arrange a few moments:</span><br style="font-family: Arial;" /><ul style="font-family: Arial;"><li>Work only with projects of the Visual Prolog system, while it was required to use various batch files or even different editors;</li><li>It was impossible to change the order of processing projects;</li><li>Impossibility of grouping projects;</li><li>Adding
projects from one directory did not allow to exclude some of them from
consideration and again to change the order of their processing;</li><li>The inability to use relative addressing of projects in the disk space.</li></ul><span style="font-family: Arial;">At the same time, we were interested in the following topics:</span><br style="font-family: Arial;" /><ul style="font-family: Arial;"><li>Strict separation of the logical part of the application and its user interface;</li><li>Microservices;</li><li>Using the concept of plug-ins in applications;</li><li>The
ability to create remote services for creating and compiling Visual
Prolog projects (the idea was once born in the discussion of Leo
Schou-Jensen and Thomas Puls, in which I participated).</li></ul><span style="font-family: Arial;">Therefore,
the WorkSpaceManager (WSM) project brought together our needs and our
architectural searches for applications based on Visual Prolog.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">It is assumed on this project to develop techniques and tools for building full-fledged microservices.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">The
project before the first working version was developed by V. Yukhtenko
(Prolog Development Center SPb), later Boris Belov took part in the
work. In solving the tasks of http interaction, Andrey Basukinsky
helped.</span><br style="font-family: Arial;" /><h2 style="font-family: Arial;">Functionality</h2><h3 style="font-family: Arial;">Resource</h3><span style="font-family: Arial;">The basic unit of
processing in WSM is a file whose extension defines its type.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">Over each file&nbsp;can be performed four
operations "Oper1", "Oper2", "Oper3" "Oper4". The nature of each of the
operations, with respect to a file of a certain type, is not strictly
fixed and is determined by the user.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">In the current implementation, these four operations are assigned the following names</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><ul style="font-family: Arial;"><li>"Oper1" - "Open";</li><li>"Oper2" - "Build";</li><li>"Oper3" - "Build Completely";</li><li>"Oper4" - "Run".</li></ul><span style="font-family: Arial;">which is inspired by the basic operations on projects in the Visual Prolog system.</span><br style="font-family: Arial;" /><span style="font-family: Arial;">So, for the project file of the Visual Prolog system having the extension .vipprj, it is assumed that</span><br style="font-family: Arial;" /><ul style="font-family: Arial;"><li>The Open operation causes the project to open in the Visual Prolog system.</li><li>The "Build" operation passes this file to VipBuilder.exe, which builds the project,</li><li>The "Build Completely" operation passes this file to VipBuilder.exe, but which performs rebuilding (Rebuild All) of the project,</li><li>The "Run" operation calls execution of the built-in application.</li></ul><span style="font-family: Arial;">For
a file with any other extension (of another type), the operation
semantics can be any other, but in general, each operation looks like a
command line in the MSWindows system</span><br style="font-family: Arial;" /><p><span style="font-weight: bold; font-family: Arial;">&lt;executing program&gt; &lt;prefix&gt; &lt;resource&gt; &lt;suffix&gt;</span></p><span style="font-family: Arial;">So
for the operation "Build" the project file test.vipprj of the Visual
Prolog system it looks like this (with accuracy to the routes):</span><br style="font-family: Arial;" /><p><span style="font-weight: bold; font-family: Arial;">vipBuilder.exe / build test.vipprj</span></p><span style="font-family: Arial;">what
causes the building of the project<span style="font-weight: bold;"> test.vippr</span>j and the creation of
the executable application <span style="font-weight: bold;">test.exe</span>, in the directory set by the
project.</span><br style="font-family: Arial;" /><h3 style="font-family: Arial;">WorkSpace</h3><span style="font-family: Arial;">WorkSpace &nbsp;contains a set
of files that are relevant to the user. The user adds and removes files from the workspace as needed.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">WSM allows you to
structure a set of files, grouping according to the criteria
defined by the user. The structure is represented as a tree and is not
a file system mapping.</span><br style="font-family: Arial;" /><span style="font-family: Arial;">The WorkSpace structure and the results of file processing are saved in a file with the extension .wsm in XML format.</span><br style="font-family: Arial;" /><span style="font-family: Arial;">The general view of the application is shown in the following figure:<br /><br style="font-family: Arial;" /></span><img style="width: 900px; height: 393px; font-family: Arial;" alt="" src="WSM_en.PNG" /><br style="font-family: Arial;" /><h3 style="font-family: Arial;">List of resources and tree</h3><span style="font-family: Arial;">The main working stretch of the user is the file list on the right side of the form. </span><br style="font-family: Arial;" /><span style="font-family: Arial;">Here
is the filename, the path&nbsp; to it, the processing status, the
number of errors and warnings, during processing, and the time of the
last processing.</span><br style="font-family: Arial;" /><p><span style="font-family: Arial;">There are four states of the result of processing:</span></p><ul style="font-family: Arial;"><li>Done - completed successfully</li><li>Failed - failed</li><li>NoPath - the route to the file or the processing program was not found</li><li>NoRule - the processing rule for this operation is not defined</li></ul><span style="font-family: Arial;">Above
each resource, one of the four described operations (Oper1, Oper2,
Oper3, Oper4) that are valid for a resource of the appropriate type can
be executed. </span><br style="font-family: Arial;" /><span style="font-family: Arial;">Above each file of the selected (marked) list,
one of these operations can also be performed. Operations are performed
in order of priority from top to bottom.</span><br style="font-family: Arial;" /><span style="font-family: Arial;">The tree on the
left side of the form is a logical representation of the user about his
workspace. Initially the tree contains only one node - the root, and
all the resources of the right part (if any) belong to this node. The
user can create an arbitrary tree structure</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">There are two types of tree nodes - a </span><span style="font-weight: bold; font-family: Arial;">group</span><span style="font-family: Arial;"> and a </span><span style="font-weight: bold; font-family: Arial;">folder</span><span style="font-family: Arial;">. </span><br style="font-family: Arial;" /><span style="font-family: Arial;">A </span><span style="font-weight: bold; font-family: Arial;">group</span><span style="font-family: Arial;">
can contain subgroups and it can have an arbitrary number of files.
The group provides operations for adding, deleting files and moving
them. </span><br style="font-family: Arial;" /><span style="font-family: Arial;">The <span style="font-weight: bold;">folder</span> corresponds to the disk space directory
contains only those files (of declared types) that are contained in the directory and
its subdirectories. </span><br style="font-family: Arial;" /><span style="font-family: Arial;">A
folder can not contain groups. The user
can move the files of the folder and (conditionally) delete them.
Remoted files remain visible and change only the brightness of the row
on the screen. The user can return the file to the active state.</span><br style="font-family: Arial;" /><p><span style="font-family: Arial;">The
right part of the form displays all files of the selected group on the
left, including all files of all subgroups and folders. This allows you
to perform operations on either all files in the workspace, or only
over the part currently in the user's focus.</span></p><span style="font-family: Arial;">Above the file
list and above the tree, Drag-And-Drop operations can be performed,
which allows you to quickly reorder priorities and processing strategy.
Moving with the keyboard is also possible.</span><br style="font-family: Arial;" /><h3 style="font-family: Arial;">Virtual directories</h3><span style="font-family: Arial;">The
user can use both absolute and relative addressing of files in the disk
space. Relative addressing is similar to that one, used in Visual Prolog.
The name of the virtual directory is preliminarily determined and this
name is used as a prefix in the file path.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">Relative
addressing allows you to move the workspace from one computer to
another, redefining only the location of virtual directories.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">The
user can define an unlimited number of virtual directories and edit
their location on this computer. However, virtual directories installed
in the Visual Prolog system can not be changed by WSM. The following
figure shows the editor of virtual directories.<br /><br style="font-family: Arial;" /></span><img style="font-family: Arial; width: 695px; height: 528px;" alt="" src="VirtualDirectoriesEn.PNG" /><br style="font-family: Arial;" /><h3 style="font-family: Arial;">Language</h3><span style="font-family: Arial;">The user interface language can be localized for user preferences. </span><br style="font-family: Arial;" /><span style="font-family: Arial;">The language setting file LanguageWSM.xml is located (and always there) in the executable file directory. </span><br style="font-family: Arial;" /><span style="font-family: Arial;">The
base language of the interface is English, but most of the form
inscriptions, dialogs and messages can be reassigned by editing the
LanguageWSM.xml file. </span><br style="font-family: Arial;" /><span style="font-family: Arial;">Switching the language of the user interface is in the Colors section of the "WorkSpace Settings" dialog.</span><br style="font-family: Arial;" /><h2 style="font-family: Arial;">Architecture</h2><span style="font-family: Arial;">The
architecture of the application from the very beginning of development
was focused on the strict separation of the user interface from the
logical part of the application in the calculation for the subsequent
use of the technology of micro services. </span><br style="font-family: Arial;" /><p><span style="font-family: Arial;">Therefore, the first implementation of the application immediately was done as separated into </span><span style="font-weight: bold; font-family: Arial;">FrontEnd</span><span style="font-family: Arial;"> and </span><span style="font-weight: bold; font-family: Arial;">BackEnd</span><span style="font-family: Arial;">. </span></p><span style="font-family: Arial;">The structure of the mono application is shown in the following figure:<br /><br style="font-family: Arial;" /></span><img style="width: 640px; height: 413px; font-family: Arial;" alt="" src="WSM_mono.JPG" /><br style="font-family: Arial;" /><span style="font-family: Arial;"><br />Here
the blue arrows show the connections inside BackEnd and FrontEnd
respectively, and red - the connection between BackEnd and FrontEnd.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">Within these structures, the modules access other modules via the BE (FE) -Connector, which accesses the Entity Registry.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">Events
originating on the initiative of the opposite side are processed by the
BE (FE) Messages module, which executes the corresponding predicates of
the BE (FE) Tasks module. That, in turn, refers to the rest of the
BackEnd modules (FrontEnd). Having received data for the opposite side,
the BE (FE) Tasks module sends a message through the BE (FE) Event
module. The opposite side subscribes to the data source events for it.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">The
initiator of data exchange is always FrontEnd, which initiates
execution of tasks in BackEnd. The work is done in asynchronous mode:
after sending the request, FrontEnd returns to its work. BackEnd, upon
receiving the request, performs a task and, possibly, initiates data
transfer to FrontEnd. This can be either one message or a sequence of
messages that need to be processed in FrontEnd.</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">This
structure of the application made it possible to pass almost painlessly
to the variant of separate applications (BackEnd and FrontEnd)
interacting via the http protocol, adding and including the Http-Server
and the Http-Client.</span><br style="font-family: Arial;" /><span style="font-family: Arial;">The structure of such an application is shown in the following figure<br /><br style="font-family: Arial;" /></span><img style="width: 640px; height: 731px; font-family: Arial;" alt="" src="WSM_CS.JPG" /><br /><br style="font-family: Arial;" /><span style="font-family: Arial;">Http-Client and Http-Server&nbsp; themselves convert data and organize their transfer between BackEnd and FrontEnd.</span><br style="font-family: Arial;" /><h2 style="font-family: Arial;">Technologies</h2><span style="font-family: Arial;">In the development of WSM, the technologies PDC VIP v.8, technologies and techniques of in-house development were used:</span><br style="font-family: Arial;" /><ul style="font-family: Arial;"><li>Registering objects in public memory;</li><li>Organization of data storage in XML format;</li><li>Exchange of data on the basis of events (Event Messaging) in the format namedValueList;</li><li>Organization of form space on the basis of split Screen;</li><li>Organization of management based on ribbon-panel;</li><li>Client-server architecture;</li><li>Data exchange via http protocol;</li><li>Data exchange in Json format (when using http protocol);</li><li>Use of message queues in conditions of multi-threaded access (when working on http protocol).</li></ul><span style="font-family: Arial;">The project application structure</span><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">The structure of the mono application is given below. <br /><br style="font-family: Arial;" /></span><img style="width: 463px; height: 893px; font-family: Arial;" alt="" src="WSM_Mono.PNG" /><br style="font-family: Arial;" /><br style="font-family: Arial;" /><span style="font-family: Arial;">And here are the project structures for Http-FrontEnd and Http-BackEnd<br /><br style="font-family: Arial;" /></span><img style="width: 462px; height: 758px; font-family: Arial;" alt="" src="WSM_Http_FrontEnd.PNG" /><img style="width: 461px; height: 660px; font-family: Arial;" alt="" src="WSM_Http_BackEnd.PNG" /><br style="font-family: Arial;" /><br style="font-family: Arial;" /></body></html>